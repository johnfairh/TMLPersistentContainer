<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 
    <link rel="stylesheet" href="css/fw2020.css">
    
    
   <title>Main APIs - TMLPersistentContainer 5.0.0</title>
    
  </head>
  <body class="j2-swift " data-root-path="./" data-doc-path="main-apis.html" data-assets-path="">

  <!-- messages for search -->
  <div hidden>
    <span id="text-loading">Loading index...</span>
    <span id="text-failed">Failed to load index</span>
    <span id="text-notfound">No matches</span>
  </div>

  <header class="j2-header">
  <div class="navbar navbar-expand navbar-dark j2-titlebar">
  <a class="sr-only-focusable sr-only font-weight-slightly-bold pr-2" href="#main-content">Skip to main content</a>
  <a class="nav-item nav-link pl-0 pt-1 pr-2 d-md-none" id="nav-toggle-button" role="button" aria-controls="nav-column" aria-expanded="false" aria-label="Toggle navigation" href="#">
    <span class="navbar-toggler-icon"></span>
  </a>

  <div style="align-items-baseline">
    <div class="navbar-brand mr-1 font-weight-slightly-bold">
      
      <a href="index.html">
      
      TMLPersistentContainer 5.0.0</a>
    </div>
    
    <span class="navbar-text j2-coverage font-weight-slightly-bold small d-none d-lg-inline-block mr-2">(100% documented)</span>
    
  </div>

  <div class="navbar-nav ml-auto justify-content-end flex-fill">

    
    <form class="form-inline d-none d-md-flex" role="search">
      <input class="form-control form-control-sm w-100" type="search" placeHolder="Search" aria-label="Search" aria-keyshortcuts="/" data-search-format="span">
    </form>
    

    
    <div class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="language-menu" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Swift</a>
      <div class="dropdown-menu dropdown-menu-right dropdown-menu-md-left" role="menu" aria-labelledby="language-menu">
        <a class="dropdown-item" href="" id="language-menu-swift" role="menuitem">Swift</a>
        <a class="dropdown-item" href="" id="language-menu-objc" role="menuitem">ObjC</a>
      </div>
    </div>
    

    
    <a class="nav-item nav-link d-none d-sm-inline" rel="external" href="https://github.com/johnfairh/TMLPersistentContainer">
      <svg class="j2-title-svg" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 16 16"><title>Open on GitHub</title><path fill="currentcolor" fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
      </svg>
    </a>
    
    
    
    

    
      <a class="nav-item nav-link d-none d-sm-inline" rel="alternate" href="dash-feed://https%3A%2F%2Fjohnfairh%2Egithub%2Eio%2FTMLPersistentContainer%2Fdocsets%2FTMLPersistentContainer%2Exml">
      <svg class="j2-title-svg" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 700 670">
        <title>Open in Dash</title>
        <path fill="currentcolor" d="m0 0 132.58 160.54h130.76v0.0312c63.501 0.196 140.87-6.9887 193.12 10.227 26.125 8.6076 43.475 19.899 57.578 40.781 14.103 20.882 26.733 55.737 25.781 118.52-0.8784 57.953-16.7 88.91-38.672 112.89-21.972 23.98-54.208 41.154-90.703 51.953-28.462 8.4219-55.314 10.153-80.547 11.953v-266.25h-160v419.92l71.328 7.8125s103.75 12.802 214.61-20c55.429-16.401 115.46-45.078 163.28-97.266 47.816-52.187 79.327-127.83 80.703-218.59 1.3028-85.935-16.743-156.6-53.125-210.47-36.382-53.871-89.369-86.47-140.16-103.2-50.787-16.733-101.87-18.272-145.08-18.504-43.211-0.2316-78.502 0.0768-97.578 0.0176v2e-3h-131.31z"/>
      </svg>
    </a>
    

    

  </div>
</div>

<!-- narrow-style searchbar -->


<div class="container-fluid j2-titlebar d-md-none">
  <div class="row">
    <div class="col">
      <form class="pb-2">
        <input class="form-control form-control-sm" type="search" placeHolder="Search" aria-label="Search" aria-keyshortcuts="/" data-search-format="div">
      </form>
    </div>
  </div>
</div>


  <nav aria-label="breadcrumb" class="small">
  
  
    <ol class="breadcrumb j2-breadcrumb j2-objc">
      <li class="breadcrumb-item"><a href="index.html">TMLPersistentContainer</a></li>
      
        
        
          <li class="breadcrumb-item" aria-current="page">Main APIs</li>
        
      
    </ol>
  
    <ol class="breadcrumb j2-breadcrumb j2-swift">
      <li class="breadcrumb-item"><a href="index.html">TMLPersistentContainer</a></li>
      
        
        
          <li class="breadcrumb-item" aria-current="page">Main APIs</li>
        
      
    </ol>
  
</nav>

  </header>

  <div class="container-fluid">
    <div class="row">
      <div class="col-auto d-none d-md-flex flex-column j2-nav" id="nav-column">
  
    <nav aria-label="Objective C" class="j2-objc">
    <ul class="j2-nav-list">
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="guides.html?objc">Guides</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="guides/background.html?objc">Background</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="guides/usage.html?objc">Usage</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        
  <a class="j2-nav-item active" href="#" aria-current="page">Main APIs</a>



  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/persistentcontainer.html?objc">PersistentContainer</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/persistentcloudkitcontainer.html?objc">PersistentCloudKitContainer</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/modelversionorder.html?objc">ModelVersionOrder</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/migrationerror.html?objc">MigrationError</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/migrationdelegate.html?objc">MigrationDelegate</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="logging-apis.html?objc">Logging APIs</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/logmessage.html?objc">LogMessage</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/loglevel.html?objc">LogLevel</a>



  </li>
  
</ul>



      </li>
      
    </ul>
  </nav>
  
    <nav aria-label="Swift" class="j2-swift">
    <ul class="j2-nav-list">
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="guides.html?swift">Guides</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="guides/background.html?swift">Background</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="guides/usage.html?swift">Usage</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        
  <a class="j2-nav-item active" href="#" aria-current="page">Main APIs</a>



  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/persistentcontainer.html?swift">PersistentContainer</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/persistentcloudkitcontainer.html?swift">PersistentCloudKitContainer</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/modelversionorder.html?swift">ModelVersionOrder</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/migrationerror.html?swift">MigrationError</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/migrationdelegate.html?swift">MigrationDelegate</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="logging-apis.html?swift">Logging APIs</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/logmessage.html?swift">LogMessage</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/logmessage.html?swift#handler">Handler</a>



  </li>
  
</ul>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/loglevel.html?swift">LogLevel</a>



  </li>
  
</ul>



      </li>
      
    </ul>
  </nav>
  
</div>

      <main class="col col-xl-8 j2-article px-lg-4 px-xl-5" id="article-column">
        <article class="j2-article-wrapper" id="main-content">

        <section>
          
          <header>
            <h1 class="j2-anchor">
              
              
              <span>Main APIs</span>
              
            </h1>
          </header>
          
          
          
          
          <p>These types form the main API.</p>
        </section>

        
<div class=" j2-always">
<hr/>
<section>
  <h1 class="sr-only">Topics</h1>
  
  <section class=" j2-always">
  
  
  
  
  
    <section id="persistentcontainer" class="j2-item ">
    <a name="//apple_ref/cpp/Class/class%20PersistentContainer" class="dashAnchor j2-item-dash-anchor" data-item-id="persistentcontainer"></a>
    <h4 class="sr-only">class PersistentContainer</h4>
    
    
    <a class="j2-item-title" href="#_persistentcontainer" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="_persistentcontainer"><code>
        <span class="j2-swift"><span class="j2-item-secondary">class </span>PersistentContainer</span>
        
        <span class="j2-objc j2-secondary"><span class="j2-item-secondary">@interface </span>PersistentContainer</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_persistentcontainer">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  
    <aside class="j2-availability mb-n1" role="note">
      <h6 class="j2-inline-heading">Availability</h6>
      <ul>
        
          <li>macOS 10.12+</li>
        
          <li>iOS 10.0+</li>
        
          <li>tvOS 10.0+</li>
        
          <li>watchOS 3.0+</li>
        
      </ul>
    </aside>
  


              


<p>A container for a Core Data stack that provides automatic multi-step shortest-path
persistent store migration.</p>
<p>This is a drop-in replacement for <a href="https://developer.apple.com/documentation/coredata/nspersistentcontainer?language=swift" class="j2-swift"><code>NSPersistentContainer</code></a><a href="https://developer.apple.com/documentation/coredata/nspersistentcontainer?language=objc" class="j2-objc j2-secondary"><code>NSPersistentContainer</code></a> that automatically detects
and performs multi-step store migration as part of the <code>loadPersistentStores</code> method.</p>
<p>The container searches for models and mapping models, then constructs the
best sequence in which to migrate stores. It prefers to use explicit mapping models
over inferred mapping models when there is a choice. Progress and status can be
reported back to the client code.</p>
<p>See <a href="https://johnfairh.github.io/TMLPersistentContainer/usage.html">the user guide</a> for more details.</p>
<p>See <a href="types/persistentcloudkitcontainer.html?swift" class="j2-swift"><code>PersistentCloudKitContainer</code></a><a href="types/persistentcloudkitcontainer.html?objc" class="j2-objc j2-secondary"><code>PersistentCloudKitContainer</code></a> for a version capable of managing both
CloudKit-backed and non-cloud stores..</p>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">open class PersistentContainer: <a href="https://developer.apple.com/documentation/coredata/nspersistentcontainer?language=swift">NSPersistentContainer</a>,
    PersistentContainerMigratable, PersistentContainerProtocol,
    LogMessageEmitter</code></pre>
  </div>


  <div class="j2-objc">
    <div class="j2-callout-title" role="heading" aria-level="6">Objective-C</div>
    <pre><code class="language-objectivec">@interface PersistentContainer : <a href="https://developer.apple.com/documentation/coredata/nspersistentcontainer?language=objc">NSPersistentContainer</a></code></pre>
  </div>


            </div>
            


          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift"><a href="types/persistentcontainer.html?swift">Show members</a></span>
            
            
              <span class="j2-objc j2-secondary"><a href="types/persistentcontainer.html?objc">Show members</a></span>
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/PersistentContainer.swift#L145-L271">Show on GitHub</a></span>
            
          </nav>
        </div>
      <div>
    </div>
    
  </section>
  
  
  
  
    <section id="persistentcloudkitcontainer" class="j2-item ">
    <a name="//apple_ref/cpp/Class/class%20PersistentCloudKitContainer" class="dashAnchor j2-item-dash-anchor" data-item-id="persistentcloudkitcontainer"></a>
    <h4 class="sr-only">class PersistentCloudKitContainer</h4>
    
    
    <a class="j2-item-title" href="#_persistentcloudkitcontainer" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="_persistentcloudkitcontainer"><code>
        <span class="j2-swift"><span class="j2-item-secondary">class </span>PersistentCloudKitContainer</span>
        
        <span class="j2-objc j2-secondary"><span class="j2-item-secondary">@interface </span>PersistentCloudKitContainer</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_persistentcloudkitcontainer">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  
    <aside class="j2-availability mb-n1" role="note">
      <h6 class="j2-inline-heading">Availability</h6>
      <ul>
        
          <li>macOS 10.15+</li>
        
          <li>iOS 13.0+</li>
        
          <li>tvOS 13.0+</li>
        
          <li>watchOS 6.0+</li>
        
      </ul>
    </aside>
  


              


<p>A container for a Core Data stack that provides automatic multi-step shortest-path
persistent store migration, capable of managing both CloudKit-backed and non-cloud stores.</p>
<p>This is a drop-in replacement for <a href="https://developer.apple.com/documentation/coredata/nspersistentcloudkitcontainer?language=swift" class="j2-swift"><code>NSPersistentCloudKitContainer</code></a><a href="https://developer.apple.com/documentation/coredata/nspersistentcloudkitcontainer?language=objc" class="j2-objc j2-secondary"><code>NSPersistentCloudKitContainer</code></a> that
automatically detects and performs multi-step store migration as part of the
<code>loadPersistentStores</code> method.</p>
<p>The container searches for models and mapping models, then constructs the
best sequence in which to migrate stores. It prefers to use explicit mapping models
over inferred mapping models when there is a choice. Progress and status can be
reported back to the client code.</p>
<p>See <a href="https://johnfairh.github.io/TMLPersistentContainer/usage.html">the user guide</a> for more details.</p>
<p>See <a href="types/persistentcontainer.html?swift" class="j2-swift"><code>PersistentContainer</code></a><a href="types/persistentcontainer.html?objc" class="j2-objc j2-secondary"><code>PersistentContainer</code></a> for a version that does not support CloudKit-backed stores.</p>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">open class PersistentCloudKitContainer: <a href="https://developer.apple.com/documentation/coredata/nspersistentcloudkitcontainer?language=swift">NSPersistentCloudKitContainer</a>,
    PersistentContainerMigratable, PersistentContainerProtocol,
    LogMessageEmitter</code></pre>
  </div>


  <div class="j2-objc">
    <div class="j2-callout-title" role="heading" aria-level="6">Objective-C</div>
    <pre><code class="language-objectivec">@interface PersistentCloudKitContainer : <a href="https://developer.apple.com/documentation/coredata/nspersistentcloudkitcontainer?language=objc">NSPersistentCloudKitContainer</a></code></pre>
  </div>


            </div>
            


          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift"><a href="types/persistentcloudkitcontainer.html?swift">Show members</a></span>
            
            
              <span class="j2-objc j2-secondary"><a href="types/persistentcloudkitcontainer.html?objc">Show members</a></span>
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/PersistentCloudKitContainer.swift#L28-L149">Show on GitHub</a></span>
            
          </nav>
        </div>
      <div>
    </div>
    
  </section>
  
  
  
  
    <section id="modelversionorder" class="j2-item j2-swift j2-always">
    <a name="//apple_ref/cpp/enum/enum%20ModelVersionOrder" class="dashAnchor j2-item-dash-anchor" data-item-id="modelversionorder"></a>
    <h4 class="sr-only">enum ModelVersionOrder</h4>
    
    
    <a class="j2-item-title" href="#_modelversionorder" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="_modelversionorder"><code>
        <span class="j2-swift j2-always"><span class="j2-item-secondary">enum </span>ModelVersionOrder</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_modelversionorder">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  
    <aside class="j2-availability mb-n1" role="note">
      <h6 class="j2-inline-heading">Availability</h6>
      <ul>
        
          <li>macOS 10.12+</li>
        
          <li>iOS 10.0+</li>
        
          <li>tvOS 10.0+</li>
        
          <li>watchOS 3.0+</li>
        
      </ul>
    </aside>
  


              


<p>A rule for ordering model versions.  The persistent container performs automatic multi-step
migration in the direction defined by this rule, which operates on the names of the model
version.
Note that the <em>model version</em> here is the part of its filename before ‘.xcdatamodel’ –
<em>not</em> the optional ‘Model Version Identifier’ that you can set in the model’s properties panel.</p>




            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift j2-always">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">public enum ModelVersionOrder

extension ModelVersionOrder: <a href="https://developer.apple.com/documentation/swift/customstringconvertible?language=swift">CustomStringConvertible</a></code></pre>
  </div>



            </div>
            


          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift j2-always"><a href="types/modelversionorder.html?swift">Show members</a></span>
            
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/ModelVersionOrder.swift#L17-L45">Show on GitHub</a></span>
            
          </nav>
        </div>
      <div>
    </div>
    
  </section>
  
  
  
  
    <section id="migrationerror" class="j2-item j2-swift j2-always">
    <a name="//apple_ref/cpp/enum/enum%20MigrationError" class="dashAnchor j2-item-dash-anchor" data-item-id="migrationerror"></a>
    <h4 class="sr-only">enum MigrationError</h4>
    
    
    <a class="j2-item-title" href="#_migrationerror" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="_migrationerror"><code>
        <span class="j2-swift j2-always"><span class="j2-item-secondary">enum </span>MigrationError</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_migrationerror">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  
    <aside class="j2-availability mb-n1" role="note">
      <h6 class="j2-inline-heading">Availability</h6>
      <ul>
        
          <li>macOS 10.12+</li>
        
          <li>iOS 10.0+</li>
        
          <li>tvOS 10.0+</li>
        
          <li>watchOS 3.0+</li>
        
      </ul>
    </aside>
  


              


<p>Errors that can occur preventing persistent store loading, passed into the callback given to
<a href="types/persistentcontainer.html?swift#loadpersistentstorescompletionhandler1" class="j2-swift"><code>PersistentContainer.loadPersistentStores(...)</code></a><a href="types/persistentcontainer.html?objc#loadpersistentstorescompletionhandler1" class="j2-objc j2-secondary"><code>-[PersistentContainer loadPersistentStoresWithCompletionHandler:]</code></a> or
<a href="types/persistentcloudkitcontainer.html?swift#loadpersistentstorescompletionhandler" class="j2-swift"><code>PersistentCloudKitContainer.loadPersistentStores(...)</code></a><a href="types/persistentcloudkitcontainer.html?objc#loadpersistentstorescompletionhandler" class="j2-objc j2-secondary"><code>-[PersistentCloudKitContainer loadPersistentStoresWithCompletionHandler:]</code></a>.</p>
<p>When any of these unusual conditions occurs, the persistent container provides a lot of
human-readable (-ish) information to the logging interface. The first step to debugging
one of these errors is to read that text and try to make sense of it.</p>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift j2-always">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">public enum MigrationError: <a href="https://developer.apple.com/documentation/swift/error?language=swift">Error</a>

extension MigrationError: <a href="https://developer.apple.com/documentation/swift/customstringconvertible?language=swift">CustomStringConvertible</a></code></pre>
  </div>



            </div>
            


          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift j2-always"><a href="types/migrationerror.html?swift">Show members</a></span>
            
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/MigrationError.swift#L20-L84">Show on GitHub</a></span>
            
          </nav>
        </div>
      <div>
    </div>
    
  </section>
  
  
  
  
    <section id="migrationdelegate" class="j2-item j2-swift j2-always">
    <a name="//apple_ref/cpp/Protocol/protocol%20MigrationDelegate" class="dashAnchor j2-item-dash-anchor" data-item-id="migrationdelegate"></a>
    <h4 class="sr-only">protocol MigrationDelegate</h4>
    
    
    <a class="j2-item-title" href="#_migrationdelegate" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="_migrationdelegate"><code>
        <span class="j2-swift j2-always"><span class="j2-item-secondary">protocol </span>MigrationDelegate</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_migrationdelegate">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  
    <aside class="j2-availability mb-n1" role="note">
      <h6 class="j2-inline-heading">Availability</h6>
      <ul>
        
          <li>macOS 10.12+</li>
        
          <li>iOS 10.0+</li>
        
          <li>tvOS 10.0+</li>
        
          <li>watchOS 3.0+</li>
        
      </ul>
    </aside>
  


              


<p>A delegate that can be provided to <a href="types/persistentcontainer.html?swift" class="j2-swift"><code>PersistentContainer</code></a><a href="types/persistentcontainer.html?objc" class="j2-objc j2-secondary"><code>PersistentContainer</code></a> or <a href="types/persistentcloudkitcontainer.html?swift" class="j2-swift"><code>PersistentCloudKitContainer</code></a><a href="types/persistentcloudkitcontainer.html?objc" class="j2-objc j2-secondary"><code>PersistentCloudKitContainer</code></a>
to receive events describing the progress of migrations. These events can be used to update a user
interface or for app internal logging.</p>
<p>All methods are called while <a href="types/persistentcontainer.html?swift#loadpersistentstorescompletionhandler1" class="j2-swift"><code>PersistentContainer.loadPersistentStores(...)</code></a><a href="types/persistentcontainer.html?objc#loadpersistentstorescompletionhandler1" class="j2-objc j2-secondary"><code>-[PersistentContainer loadPersistentStoresWithCompletionHandler:]</code></a> is active.
If <em>any</em> of the <a href="https://developer.apple.com/documentation/coredata/nspersistentstoredescription?language=swift" class="j2-swift"><code>NSPersistentStoreDescription</code></a><a href="https://developer.apple.com/documentation/coredata/nspersistentstoredescription?language=objc" class="j2-objc j2-secondary"><code>NSPersistentStoreDescription</code></a>s have the <code>shouldAddStoreAsynchronously</code> flag
set to <code>true</code> then all methods are called on a private background queue. If all of the store
descriptions have the flag set to <code>false</code> then the methods are called on the same queue on which
<a href="types/persistentcontainer.html?swift#loadpersistentstorescompletionhandler1" class="j2-swift"><code>PersistentContainer.loadPersistentStores(...)</code></a><a href="types/persistentcontainer.html?objc#loadpersistentstorescompletionhandler1" class="j2-objc j2-secondary"><code>-[PersistentContainer loadPersistentStoresWithCompletionHandler:]</code></a> was called.</p>
<p>The stores in <code>PersistentContainer.persistentStoreDescriptions</code> are processed sequentially.
Stores that are not migratable (not on disk) are ignored and do not represent in this delegate.</p>
<p>A store that does not require migration (the normal case!) sees the sequence:</p>
<ol>
<li>willConsiderStore</li>
<li>willNotMigrateStore</li>
</ol>
<p>A store requiring a 2-step migration sees the sequence:</p>
<ol>
<li>willConsiderStore</li>
<li>willMigrateStore - totalSteps=2</li>
<li>willSingleMigrateStore - stepsRemaining=2</li>
<li>willSingleMigrateStore - stepsRemaining=1</li>
<li>didMigrateStore</li>
</ol>
<p>Errors can occur at any point following <code>willConsiderStore</code> for example:</p>
<ol>
<li>willConsiderStore</li>
<li>willMigrateStore - totalSteps=8</li>
<li>didFailToMigrateStore</li>
</ol>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift j2-always">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">public protocol MigrationDelegate: <a href="https://developer.apple.com/documentation/swift/anyobject?language=swift">AnyObject</a></code></pre>
  </div>



            </div>
            


          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift j2-always"><a href="types/migrationdelegate.html?swift">Show members</a></span>
            
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/MigrationDelegate.swift#L44-L120">Show on GitHub</a></span>
            
          </nav>
        </div>
      <div>
    </div>
    
  </section>
  
  
</section>

  
</section>
</div>



        
        <div class="flex-grow-1"></div>
        <nav aria-label="paging" class="j2-pagination pb-3 pt-2">
  <div id="pagination-prev" class="flex-fill">
  
    <a class="j2-swift" href="guides/usage.html?swift" aria-keyshortcuts="p">
  <span aria-hidden="true">&laquo; </span>Usage
</a>

    <a class="j2-objc j2-secondary" href="guides/usage.html?swift" aria-keyshortcuts="p">
  <span aria-hidden="true">&laquo; </span>Usage
</a>

  
  
  </div>
  <div id="pagination-next" class="flex-fill text-right">
  
    <a class="j2-swift" href="types/persistentcontainer.html?swift" aria-keyshortcuts="n">
  PersistentContainer<span aria-hidden="true"> &raquo;</span>
</a>

    <a class="j2-objc j2-secondary" href="types/persistentcontainer.html?objc" aria-keyshortcuts="n">
  PersistentContainer<span aria-hidden="true"> &raquo;</span>
</a>

  
  
  </div>
</nav>

        

        </article>
      </main>

      <div class="col-xl d-none d-xl-block j2-aux-nav" id="aux-nav-column">
  <div class="j2-aux-nav-wrapper">
    
    
    <h6 class="j2-inline-heading">Actions</h6>
    <ul class="j2-aux-group">
      
      <li><a class="j2-aux-action" id="action-search" href="#" role="button" aria-keyshortcuts="/">Search (/)</a></li>
      
      
      
      <li><a class="j2-aux-action" id="action-collapse" href="#" role="button" aria-keyshortcuts="a">
          <span id="action-collapse-expand">Open all (a)</span>
          <span id="action-collapse-collapse" class="d-none">Close all (a)</span>
      </a></li>
      
      
      
      <li><a class="j2-aux-action" id="action-language" href="#" role="button" aria-keyshortcuts="l">
          <span class="j2-swift">Objective-C (l)</span>
          <span class="j2-objc">Swift (l)</span>
      </a></li>
      
    </ul>
    
  </div>
</div>


    </div> <!-- end row -->

    <footer class="row">
  <div class="col j2-footer small pt-2">
    <p><p>Distributed under the ISC license.  Maintained by John Fairhurst.</p></p>
    
    <p>Generated by <a class="link" href="https://github.com/johnfairh/Bebop" target="_blank" rel="external">Bebop v1.0</a> using the FW2020 theme, based on technology from <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫</a>.</p>
    
  </div>
</footer>

  </div> <!-- container -->

  <script src="js/dependencies.min.js"></script>
  
  <script src="js/fw2020.js"></script>
  </body>
</html>
